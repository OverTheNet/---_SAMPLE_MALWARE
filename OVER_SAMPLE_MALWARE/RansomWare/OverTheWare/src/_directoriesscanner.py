import os

__all__ = ["SCANDIRECTORIES"]

def SCANALL(bdir:str):
    for xd in os.scandir(bdir):
        try:
            if xd.is_file():
                yield xd
            else:
                yield from SCANALL(xd.path)
        except KeyboardInterrupt:
            raise UserWarning("CLOSED BY USER")
        except:
            pass
        
class SCANDIRECTORIES(object):
    def __new__(cls,trdir:str):
        rb = object.__new__(cls)
        return rb
    def __init__(self,trdir:str):
        self.__dr = os.path.expandvars(trdir)
        self.__sd = list(SCANALL(self.__dr))
    def __str__(self):
        return "SCANNING DIRECTORIES - PROCESS"
    def __call__(self):
        return 
    def __getstate__(self):
        raise TypeError("D.E.N.I.E.D")
    def __repr__(self):
        return SCANDIRECTORIES.__doc__
    def _RETURN_DIRECTORY(self):
        return self.__dr
    def _RETURN_SAMPLE(self):
        try:
            if isinstance(self.__sd,list):
                if len(self.__sd) != 0:
                    return self.__sd
                else:
                    return []
            else:
                return []
        except KeyboardInterrupt:
            raise UserWarning("CLOSED BY USER")
        except:
            pass